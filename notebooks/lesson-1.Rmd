---
title: "Lesson 1"
author: "A Irwin"
date: "2023-05-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse, quietly = TRUE)
```

Goals:

* What is the realized niche of a phytoplankton species?
* Determine with three methods: linear regression, generalized linear regression, generalized additive models.
* Discuss key features: presence/absence data, log abundance, variable selection.
* Compare the niche of two species.


## Data

We will use abundance data of a few phytoplankton species and associated environmental data from Station CARIACO.

```{r}
phyto <- read_csv(here::here("data/Cariaco/phyto-ss.csv"))
phyto |> ggplot(aes(x = abundance)) +
  geom_histogram() +
  facet_wrap(~ ScientificName_accepted) +
  theme_bw() +
  scale_x_log10()
```


```{r warning=FALSE}
zoo <- read_csv(here::here("data/Cariaco/zoo-ss.csv"))
zoo |> filter(Mesh_Size == 200) |>
  pivot_longer(TOTAL_DENSITY:CHAETOGNATHA) |>
  ggplot(aes(x = value)) +
  geom_histogram() +
  facet_wrap(~ name) +
  theme_bw() +
  scale_x_log10()
```

```{r warning=FALSE}
niskin <- read_csv(here::here("data/Cariaco/niskin-ss.csv"))
niskin |> 
  ggplot(aes(NO3_NO2_USF + NH4_USF, PO4_USF)) +
  geom_point() + 
  # scale_x_log10() + scale_y_log10() + 
  theme_bw() 
```

